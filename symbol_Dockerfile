FROM tensorflow/tensorflow:latest-gpu

RUN apt update
RUN apt upgrade -y
RUN pip install --upgrade pip

RUN pip install yahoo-historical
RUN apt install -y python3-psycopg2

RUN mkdir -p /app/python/database /app/scripts /app/xml

WORKDIR /app

ADD symbol.py /app
ADD scripts/* /app/scripts/
ADD python/database/ /app/python/database
ADD xml/db_connection.xml xml/db_connection.xml

CMD /app/scripts/$SYMBOL.sh
