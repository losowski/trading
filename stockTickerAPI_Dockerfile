FROM debian

RUN apt update
RUN apt upgrade -y

RUN apt install -y python3 python3-pip protobuf-compiler
RUN pip3 install --upgrade google-api-python-client

RUN mkdir -p /app/xml

WORKDIR /app

ADD stockTickerAPI.py /app
ADD queryStock.py /app
ADD protocolbuffers/ /app/protocolbuffers
ADD python/ /app/python/

RUN $(cd /app/protocolbuffers; ./build.sh)

CMD /app/stockTickerAPI.py
